<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dhika & Putri Wedding</title>
  <meta property="og:title" content="The Wedding of Dhika ❤ Putri">
  <meta property="og:description" content="Dengan penuh kebahagiaan, kami mengundang Anda untuk merayakan pernikahan kami. Saksikan momen indah ini di Nagari Tanjung Alam pada Minggu, 22 Juni 2025 pukul 08.00 WIB - selesai. Informasi lebih lanjut dan konfirmasi kehadiran Anda dapat diakses di website ini.">
  <meta property="og:url" content="https://andhikawahyuputra.github.io/wedding/?n=Semuanya%20dan%20Partner">
  <meta property="og:image" content="img\bg.png">
  <meta property="og:type" content="website">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Sacramento&family=Work+Sans:wght@100;300;400;600;700&display=swap"
    rel="stylesheet">

  <!-- simplyCountdown -->
  <link rel="stylesheet" href="countdown/simplyCountdown.theme.default.css" />
  <script src="countdown/simplyCountdown.min.js"></script>

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <link rel="stylesheet" href="style.css">
</head>

<body>

  <section id="hero"
    class="hero w-100 h-100 p-3 mx-auto text-center d-flex justify-content-center align-items-center text-white">
    <main>
      <div class="landing">
        <img src="img\gold-assets\line-1.png" class="hero-corner">
        <h4>The Wedding Of</h4>
        <h1>Dhika & Putri</h1>
        <h4>Dear, <br><span>Bapak/Ibu/Saudara/i, </span></h4>
        <a href="#home" class="btn btn-lg mt-4" onClick="enableScroll()"><i class="bi bi-envelope-open"></i> Lihat Undangan</a>
        <img src="img\gold-assets\line-bottom-1.png" class="hero-corner-bottom">
      </div>
    </main>
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="hero-limiter">
  </section>

  <section id="home" class="home">
    <div class="container">
      <div class="row justify-content-center doa">
        <div class="col-md-8 col-10 text-center">
          <h3> وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُمْ مِنْ أَنْفُسِكُمْ أَزْوَاجًا لِتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُمْ مَوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِقَوْمٍ يَتَفَكَّرُونَ </h3>
          <p>"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang"</p>
          <h3>(QS Ar-Rum: 21)</h3>
        </div>
      </div>

      <div class="row justify-content-center acara">
        <div class="col-md-8 text-center">
          <h2>Assalamu'alaikum</h2>
          <p>Maha Suci Allah yang telah menciptakan makhluk-Nya berpasang-pasangan. Ya Allah semoga ridho-Mu tercurah mengiringi pernikahan kami:</p>
        </div>
      </div>

      <div class="row couple">
        <div class="col-lg-6">
          <div class="row">
            <div class="col-8 text-end spaceup">
              <h3>Andhika Wahyu Putra, S.St</h3>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque praesentium aut ipsa perferendis,
                incidunt soluta?</p>
              <p>Putra dari Bpk. Nasri Herman <br> dan <br> Ibu Yusnita (Almh)</p>
            </div>
            <div class="col-4 text-center">
              <img src="img/dhika.png" alt="Andhika Wahyu Putra" class="img-responsive rounded-circle">
              <a href="https://instagram.com/andhikawahyuputra"><i class="bi bi-instagram h2"></i></a>
            </div>
          </div>
        </div>

        <span class="heart"><i class="bi bi-heart-fill"></i></span>

        <div class="col-lg-6">
          <div class="row">
            <div class="col-4 text-center">
              <img src="img/putri.png" alt="Dwi Aprilia Heni Putri" class="img-responsive rounded-circle">
              <a href="https://instagram.com/dwiapriliaheniputri"><i class="bi bi-instagram h2"></i></a>
            </div>
            <div class="col-8 spacedown">
              <h3>Dwi Aprilia Heni Putri, S.Pd</h3>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque praesentium aut ipsa perferendis,
                incidunt soluta?</p>
              <p>Putri dari Bpk. Bujang Hendri <br> dan <br> Ibu Indrawati</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="hitungmundur" class="hitungmundur">
    <div class="container">
      <div class="row justify-content-center latarhitung">
        <div class="col-md-10 col-12 text-center">
          <h2>Counting Down The Big Day</h2>
          <p>"Semoga Allah menghimpun yang terserak dari keduanya, memberkati mereka berdua dan kiranya Allah meningkatkan kualitas keturunan mereka, menjadikannya pembuka pintu rahmat, sumber ilmu dan hikmah serta pemberi rasa aman bagi umat."<br>(Doa Nabi Muhammad SAW, pada pernikahan putrinya Fatimah Azzahra dengan Ali Bin Abi Thalib)</p>
          <div class="simply-countdown"></div>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="info" class="info">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8 col-10 text-center">
          <h2>Wedding Session</h2>
        </div>
      </div>

      <div class="row justify-content-center mt-4">
        <div class="col-md-5 col-10">
          <div class="card text-center text-bg-light mb-5">
            <div class="card-header">Akad Nikah</div>
            <div class="card-body">
              <div class="row justify-content-center">
                <div class="col-md-6">
                  <i class="bi bi-clock d-block"></i>
                  <span>08.00 - selesai</span>
                </div>
                <div class="col-md-6">
                  <i class="bi bi-calendar3 d-block"></i>
                  <span>Jumat, 20 Juni 2025</span><br>
                  <a class="btn btn-light btn-sm mt-3 mb-3" target="_blank" href="https://calendar.google.com/calendar/event?action=TEMPLATE&amp;tmeid=N3Zza29uOGJkM2k2Z2VzaTEyZTZxYjZydDcgYW5kaGlrYXdhaHl1MjIwNkBt&amp;tmsrc=andhikawahyu2206%40gmail.com">Simpan tanggal</a>
                </div>
                <div class="col-md-6">
                  <i class="bi bi-geo-alt"></i><br>
                  <span>Jl. Raya Batusangkar, Tanjung Alam, Kec. Tanjung Baru, Kab. Tanah Datar</span><br>
                  <a href="https://maps.app.goo.gl/ydpZZ6a1L4eP7Pzs7" target="_blank" class="btn btn-light btn-sm mt-3 mb-3">Klik untuk membuka peta</a>
                </div>
              </div>
            </div>
            <div class="card-footer">
              Saat acara akad diharapkan untuk kondusif menjaga kekhidmatan dan kekhusyuan seluruh prosesi.
            </div>
          </div>
        </div>
        <div class="col-md-5 col-10">
          <div class="card text-center text-bg-light mb-5">
            <div class="card-header">Resepsi</div>
            <div class="card-body">
              <div class="row justify-content-center">
                <div class="col-md-6">
                  <i class="bi bi-clock d-block"></i>
                  <span>08.00 - selesai</span>
                </div>
                <div class="col-md-6">
                  <i class="bi bi-calendar3 d-block"></i>
                  <span>Minggu, 22 Juni 2025</span><br>
                  <a class="btn btn-light btn-sm mt-3 mb-3" target="_blank" href="https://calendar.google.com/calendar/event?action=TEMPLATE&amp;tmeid=NHE4ZjJsb2YyYmo3YWprOWNlY3BvdjZoZm0gYW5kaGlrYXdhaHl1MjIwNkBt&amp;tmsrc=andhikawahyu2206%40gmail.com">Simpan tanggal</a>
                </div>
                <div class="col-md-6">
                  <i class="bi bi-geo-alt"></i><br>
                  <span>Jl. Raya Batusangkar, Tanjung Alam, Kec. Tanjung Baru, Kab. Tanah Datar</span><br>
                  <a href="https://maps.app.goo.gl/ydpZZ6a1L4eP7Pzs7" target="_blank" class="btn btn-light btn-sm mt-3 mb-3">Klik untuk membuka peta</a>
                </div>
              </div>
            </div>
            <div class="card-footer">
              Saat acara resepsi diharapkan untuk kondusif menjaga kekhidmatan dan kekhusyuan seluruh prosesi.
            </div>
          </div>
        </div>
        <div class="col-md-5 col-10">
          <div class="card text-center text-bg-light">
            <div class="card-header">Live Streaming</div>
            <div class="card-body">
              <div class="row justify-content-center">
                <div class="col-md-6">
                  <i class="bi bi-instagram h2"></i><h4> Instagram</h4><br>
                  <a class="btn btn-light btn-sm mb-3" href="https://instagram.com/dwiapriliaheniputri">@dwiapriliaheniputri</a>
                </div>
              </div>
            </div>
            <div class="card-footer">
              Saat acara resepsi diharapkan untuk kondusif menjaga kekhidmatan dan kekhusyuan seluruh prosesi.
            </div>
          </div>
        </div>
      </div>
      <div class="description">
        <p>Diharapkan untuk tidak salah alamat dan tanggal. Manakala tiba di tujuan namun tidak
        ada tanda-tanda sedang dilangsungkan pernikahan, boleh jadi Anda salah jadwal, atau salah tempat.</p>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="story" class="story">
    <div class="container">
      <div class="row justify-content-center storytext">
        <div class="col-md-8 col-10 text-center">
          <span>Bagaimana Cinta Kami Bersemi</span>
          <h2>Our Story</h2>
          <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Porro, similique non soluta nulla asperiores
            voluptatem.</p>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <ul class="timeline">
            <li>
              <div class="timeline-image" style="background-image: url(img/sma.jpg);"></div>
              <div class="timeline-panel">
                <div class="timeline-heading">
                  <h3>Pertama Bertemu</h3>
                  <span>01 Juni 2014</span>
                </div>
                <div class="timeline-body">
                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos, modi autem? Commodi autem quo quia?
                  </p>
                </div>
              </div>

            </li>
            <li class="timeline-inverted">
              <div class="timeline-image" style="background-image: url(img/mulai.jpg);"></div>
              <div class="timeline-panel">
                <div class="timeline-heading">
                  <h3>Mulai Serius</h3>
                  <span>09 Februari 2022</span>
                </div>
                <div class="timeline-body">
                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto enim eaque obcaecati odit
                    itaque explicabo quisquam quos at.
                  </p>
                </div>
              </div>

            </li>
            <li>
              <div class="timeline-image" style="background-image: url(img/tunangan.jpg);"></div>
              <div class="timeline-panel">
                <div class="timeline-heading">
                  <h3>Tunangan</h3>
                  <span>11 Februari 2024</span>
                </div>
                <div class="timeline-body">
                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet, deleniti distinctio. Esse quas sit explicabo corporis magni qui expedita a.</p>
                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="gallery" class="gallery">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8 col-10 text-center">
          <span>Memori Kisah Kami</span>
          <h2>Our Gallery</h2>
          <p>“Maha suci Allah SWT yang telah menciptakan makhluk-Nya berpasang-pasangan. Untuk mengikuti Sunnah Rasul-Mu dalam rangka membentuk keluarga yang sakinah, mawaddah, warahmah. Maka ijinkanlah kami menikahkannya. “</p>
        </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-6 mt-3">
          <a href="img/gallery/1.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 1" data-gallery="mygallery">
            <img src="img/gallery/thumbnail/1.jpg" alt="Dhika & Putri 1" class="img-fluid w-100 rounded">
          </a>
        </div>
        <div class="col-6 mt-3">
          <a href="img/gallery/2.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 2"
            data-gallery="mygallery">
            <img src="img/gallery/thumbnail/2.jpg" alt="Dhika & Putri 2" class="img-fluid w-100 rounded">
          </a>
        </div>
        <div class="col-6 mt-3">
          <a href="img/gallery/3.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 3"
            data-gallery="mygallery">
            <img src="img/gallery/thumbnail/3.jpg" alt="Dhika & Putri 3" class="img-fluid w-100 rounded">
          </a>
        </div>
        <div class="col-6 mt-3">
          <a href="img/gallery/4.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 4"
            data-gallery="mygallery">
            <img src="img/gallery/thumbnail/4.jpg" alt="Dhika & Putri 4" class="img-fluid w-100 rounded">
          </a>
        </div>
        <div class="col-6 mt-3">
          <a href="img/gallery/5.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 5"
            data-gallery="mygallery">
            <img src="img/gallery/thumbnail/5.jpg" alt="Dhika & Putri 5" class="img-fluid w-100 rounded">
          </a>
        </div>
        <div class="col-6 mt-3">
          <a href="img/gallery/6.jpg" data-toggle="lightbox" data-caption="Dhika & Putri 6"
            data-gallery="mygallery">
            <img src="img/gallery/thumbnail/6.jpg" alt="Dhika & Putri 6" class="img-fluid w-100 rounded">
          </a>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="rsvp" class="rsvp">
    <div class="container">
      <div class="row justify-content-center rsvptext">
        <div class="col-md-8 col-10 text-center">
          <span>Kehadiran dan Doa</span>
          <h2>Wedding Wish</h2>
          <p>Ucapan Selamat Dan Kebahagiaan Bisa Dari Mana Saja. Tanpa Jabatan-Jabatan Tangan Atau Pelukan-Pelukan Hangat, Masih Ada Simpul-Simpul Senyum Dan Doa-Doa Baik Yang Kami Harapkan.</p>
        </div>
      </div>

      <form class="row row-cols-md-auto align-items-center justify-content-center" method="POST"
        action="https://script.google.com/macros/s/AKfycbyY8dhWWFBFlTFfivzKDZ1_bijepE3LKb29MLtretKl-8_SHVv9h7Uflrs1QBwEOEbp/exec"
        id="my-form">
        <div class="col-12">
          <div class="mb-3">
            <label for="nama" class="form-label">Nama</label>
            <input type="text" class="form-control nama" id="nama" name="nama">
          </div>
        </div>
        <div class="col-12">
          <div class="mb-3">
            <label for="jumlah" class="form-label">Jumlah</label>
            <input type="number" class="form-control" id="jumlah" name="jumlah" min="1" max="5" length="1" value="1">
          </div>
        </div>
        <div class="col-12">
          <div class="mb-3">
            <label for="kehadiran" class="form-label">Konfirmasi</label>
            <select name="kehadiran" id="kehadiran" class="form-select">
              <option selected>Pilih salah satu</option>
              <option value="Hadir">Hadir</option>
              <option value="Tidak Hadir">Tidak Hadir</option>
            </select>
          </div>
        </div>
        <div class="col-12">
          <div class="mb-3">
            <label for="pesan" class="form-label">Pesan</label>
            <input type="text" placeholder="Tuliskan pesan" class="form-control usercomment" id="pesan" name="pesan">
          </div>
        </div>
        <div class="col-md-12" style="margin-bottom: 10px;">
          <button class="btn btn-primary" id="publish">Kirim</button>
        </div>
        <div class="comments"></div>
      </form>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <section id="gifts" class="gifts">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8 col-10 text-center">
          <span>Harapan dan Hadiah</span>
          <h2>Wedding Gift</h2>
          <p>Kehadiran anda merupakan hadiah terbaik yang bisa kami harapkan. Namun jika anda bermaksud untuk mengirimkan hadiah pernikahan lain, silahkan ketuk tombol di bawah ini:</p>
        </div>
      </div>

      <div class="row justify-content-center text-center">
        <div class="col-md-6">
          <ul class="list-group">
            <li class="list-group-item">
              <img class="nagari mb-2" src="img/nagari.png" alt="Bank Nagari"><br>
              <p>An. Dwi Aprilia Heni Putri <br><span id="rekNagari">03020210030596</span></p>
              <button class="btn btn-primary" id="salinNagari"><i class="bi bi-files"></i> Salin Nomor</button>
            </li>
            <li class="list-group-item">
              <img class="bri mb-2" src="img/bri.png" alt="Bank BRI"><br>
              <p>An. Andhika Wahyu Putra <br><span id="rekBri">016901050151508</span></p>
              <button class="btn btn-primary" id="salinBri"><i class="bi bi-files"></i> Salin Nomor</button>
            </li>
            <li class="list-group-item">
              <h3><i class="bi bi-gift-fill"></i>Kirim Hadiah</h3>
              <p>Alamat :<br><span id="alamatKado">SRC Barokah, Nagari Tanjung Alam, Kec Tanjung Baru, Kab Tanah Datar, Sumatera Barat 27263</span></p>
              <button class="btn btn-primary" id="salinAlamat"><i class="bi bi-files"></i> Salin Alamat</button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>
  
  <section id="close" class="close">
    <div class="container">
      <div class="row justify-content-center closetext">
        <div class="col-md-8 col-10 text-center">
          <h3>Terima Kasih</h3>
          <p>Merupakan suatu kebahagiaan dan kehormatan bagi kami, apabila Bapak/Ibu/Saudara/i, berkenan hadir dan memberikan doa restu kepada Kami.</p><br>
          <p>Kami yang berbahagia,</p>
          <h2>Dhika & Putri</h2>
        </div>
      </div>
    </div>
  </section>
  
  <div class="limiter-between">
    <img src="img/gold-assets/line-4.png" alt="Gambar Header" class="limiter">
  </div>

  <footer>
    <div class="container">
      <div class="row">
        <div class="col text-center">
          <small class="block">&copy; Built with ❤ by Dhika & Putri</small><br>
          <small class="block">Design by <a href="https://instagram.com/andhikawahyuputra">@andhikawahyuputra</a>.</small>

          <ul class="mt-3">
            <li><a href="#"><i class="bi bi-instagram"></i></a></li>
            <li><a href="#"><i class="bi bi-youtube"></i></a></li>
            <li><a href="#"><i class="bi bi-twitter"></i></a></li>
            <li><a href="#"><i class="bi bi-facebook"></i></a></li>
            <li><a href="#"><i class="bi bi-tiktok"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <div id="audio-container">
    <audio id="song" autoplay loop>
      <source src="audio/song.mp3" type="audio/mp3">
    </audio>

    <div class="audio-icon-wrapper" style="display: none;">
      <i class="bi bi-disc"></i>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/bs5-lightbox@1.8.3/dist/index.bundle.min.js"></script>

  <script>
    simplyCountdown('.simply-countdown', {
      year: 2025, // required
      month: 6, // required
      day: 22, // required
      hours: 8, // Default is 0 [0-23] integer
      words: { //words displayed into the countdown
        days: { singular: 'hari', plural: 'hari' },
        hours: { singular: 'jam', plural: 'jam' },
        minutes: { singular: 'menit', plural: 'menit' },
        seconds: { singular: 'detik', plural: 'detik' }
      },
    });
  </script>

<script>
  const rootElement = document.querySelector(":root");
  const audioIconWrapper = document.querySelector('.audio-icon-wrapper');
  const audioIcon = document.querySelector('.audio-icon-wrapper i');
  const song = document.querySelector('#song');
  let isPlaying = false;

  function disableScroll() {
    scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

    window.onscroll = function () {
      window.scrollTo(scrollTop, scrollLeft);
    }

    rootElement.style.scrollBehavior = 'auto';
  }

  function enableScroll() {
    window.onscroll = function () { }
    rootElement.style.scrollBehavior = 'smooth';
    // localStorage.setItem('opened', 'true');
    playAudio();
  }

  function playAudio() {
    song.volume = 1;
    audioIconWrapper.style.display = 'flex';
    song.play();
    isPlaying = true;
  }

  audioIconWrapper.onclick = function () {
    if (isPlaying) {
      song.pause();
      audioIcon.classList.remove('bi-disc');
      audioIcon.classList.add('bi-pause-circle');
    } else {
      song.play();
      audioIcon.classList.add('bi-disc');
      audioIcon.classList.remove('bi-pause-circle');
    }

    isPlaying = !isPlaying;
  }

  // if (!localStorage.getItem('opened')) {
  //   disableScroll();
  // }
  disableScroll();
</script>
<script>
  window.addEventListener("load", function () {
    const form = document.getElementById('my-form');
    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const data = new FormData(form);
      const action = e.target.action;
      fetch(action, {
        method: 'POST',
        body: data,
      })
        .then(() => {
          alert("Konfirmasi kehadiran berhasil terkirim!");
        })
    });
  });
</script>

<script>
"use strict";

const userComment = document.querySelector(".usercomment");
const publishBtn = document.querySelector("#publish");
const comments = document.querySelector(".comments");
const userName = document.querySelector(".nama");
const attendanceSelect = document.querySelector("#kehadiran"); // Tambahkan dropdown kehadiran
const quantityInput = document.querySelector("#jumlah"); // Tambahkan input jumlah

userComment.addEventListener("input", () => {
    if (!userComment.value) {
        publishBtn.setAttribute("disabled", "disabled");
        publishBtn.classList.remove("abled");
    } else {
        publishBtn.removeAttribute("disabled");
        publishBtn.classList.add("abled");
    }
});

function addPost(e) {
    e.preventDefault();

    let userId = {
        nama: userName.value || "Anonymous",
        komentar: userComment.value,
        kehadiran: attendanceSelect.value, // Ambil nilai kehadiran dari dropdown
        jumlah: quantityInput.value || "0", // Ambil jumlah dari input
    };

    if (!userId.komentar) return;

    fetch("https://script.google.com/macros/s/AKfycbwnr2q4QyIMdo7iVx14Ld9MmTTKtF7Kw_uA7OthXwOkne_Qm3bx0Utncq5LKqEz5pEMyA/exec", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams(userId),
    })
    .then(response => response.json())
    .then(data => {
        if (data.result === "success") {
            loadPosts(); // Reload komentar setelah sukses
            userComment.value = ""; // Kosongkan input komentar
            quantityInput.value = ""; // Kosongkan input jumlah
            alert("Pesan berhasil dikirim! 🎉"); // Menampilkan alert sukses
        }
    })
    .catch(error => {
        alert("Terjadi kesalahan, coba lagi nanti.");
        console.error(error);
    });
}

function loadPosts() {
    fetch("https://script.google.com/macros/s/AKfycbwnr2q4QyIMdo7iVx14Ld9MmTTKtF7Kw_uA7OthXwOkne_Qm3bx0Utncq5LKqEz5pEMyA/exec")
        .then(response => response.json())
        .then(data => {
            comments.innerHTML = ""; // Bersihkan komentar lama

            data.forEach(post => {
                let liked = localStorage.getItem(`liked_${post.id}`) === "true"; // Cek apakah sudah di-like
                let heartIcon = liked ? "img/heart-fill.png" : "img/heart.png"; // Tentukan ikon hati
                
                let published = `
                    <div class="row parents">
                        <div class="col-md-4">
                            <p>${post.nama}</p>
                            <p>${post.komentar}</p>
                        </div>
                        <div class="col-md-8 engagements ms-auto">
                            <img src="${heartIcon}" class="heart-icon" data-post-id="${post.id}" style="cursor: pointer;">
                            <span class="date">${new Date(post.tanggal).toLocaleString()}</span>
                        </div>
                    </div>`;
                
                comments.innerHTML += published;
            });
        });
}

// ** Load semua komentar saat halaman dimuat **
document.addEventListener("DOMContentLoaded", loadPosts);

// ** Event Delegation untuk ikon hati **
comments.addEventListener("click", function (event) {
    if (event.target.classList.contains("heart-icon")) {
        let img = event.target;
        let postId = img.dataset.postId; // Ambil ID unik postingan

        if (img.src.includes("heart.png")) {
            img.src = "img/heart-fill.png";
            localStorage.setItem(`liked_${postId}`, "true"); // Simpan status di localStorage
        } else {
            img.src = "img/heart.png";
            localStorage.removeItem(`liked_${postId}`); // Hapus dari localStorage
        }
    }
});


// ** Tambahkan event listener ke tombol kirim **
publishBtn.addEventListener("click", addPost);

</script>

<script>
  document.getElementById("salinNagari").addEventListener("click", function() {
  var rekNagari = document.getElementById("rekNagari").textContent;
  navigator.clipboard.writeText(rekNagari)
    .then(() => {
      alert("Nomor rekening berhasil disalin!");
    })
    .catch(err => {
      console.error("Gagal menyalin: ", err);
      alert("Gagal menyalin nomor rekening.");
    });
});
</script>

<script>
  document.getElementById("salinBri").addEventListener("click", function() {
  var rekBri = document.getElementById("rekBri").textContent;
  navigator.clipboard.writeText(rekBri)
    .then(() => {
      alert("Nomor rekening berhasil disalin!");
    })
    .catch(err => {
      console.error("Gagal menyalin: ", err);
      alert("Gagal menyalin nomor rekening.");
    });
});
</script>

<script>
  document.getElementById("salinAlamat").addEventListener("click", function() {
  var alamatKado = document.getElementById("alamatKado").textContent;
  navigator.clipboard.writeText(alamatKado)
    .then(() => {
      alert("Alamat berhasil disalin!");
    })
    .catch(err => {
      console.error("Gagal menyalin: ", err);
      alert("Gagal menyalin alamat.");
    });
});
</script>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const nama = urlParams.get('n') || '';
  const pronoun = urlParams.get('p') || '';
  const namaContainer = document.querySelector('.hero h4 span');
  namaContainer.innerText = `${pronoun} ${nama}`.replace(/ ,$/, '');

  document.querySelector('#nama').value = nama;
</script>
</body>

</html>